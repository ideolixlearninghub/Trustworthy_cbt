<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Trustworthy College - Islamic Studies CBT Exam</title>
    <style>
        /* Reset and base styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Roboto', 'Arial', sans-serif;
        }
        
        body {
            background-color: #0f1a0a;
            color: #f5e9dd;
            line-height: 1.6;
            position: relative;
            min-height: 100vh;
        }
        
        /* Dimmed background overlay with Islamic theme */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url('https://images.unsplash.com/photo-1512389142860-9c449e58a543?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2069&q=80');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            opacity: 0.15;
            z-index: -1;
            transition: background-image 1.5s ease-in-out;
        }
        
        /* Container with Islamic color theme (green/gold) */
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 25px;
            background: linear-gradient(135deg, #0f2a1a 0%, #1a3a24 100%);
            box-shadow: 0 15px 40px rgba(30, 114, 60, 0.25);
            border-radius: 16px;
            margin-top: 25px;
            margin-bottom: 25px;
            position: relative;
            overflow: hidden;
            border: 3px solid #27ae60;
            backdrop-filter: blur(5px);
        }
        
        /* Green decorative border effect */
        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #27ae60, #2ecc71, #27ae60);
            z-index: 2;
        }
        
        /* Header with Islamic theme */
        .header {
            text-align: center;
            padding-bottom: 25px;
            margin-bottom: 30px;
            position: relative;
            border-bottom: 2px solid #27ae60;
        }
        
        .header::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 50%;
            transform: translateX(-50%);
            width: 150px;
            height: 3px;
            background: linear-gradient(to right, transparent, #27ae60, transparent);
        }
        
        .logo {
            max-width: 140px;
            height: auto;
            margin-bottom: 15px;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3));
            border-radius: 10px;
            border: 3px solid #27ae60;
            padding: 5px;
            background: rgba(255, 255, 255, 0.1);
            transition: transform 0.3s ease;
        }
        
        .logo:hover {
            transform: scale(1.05);
        }
        
        .subject-title {
            color: #2ecc71;
            font-size: 2.4rem;
            margin: 10px 0 5px;
            text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.7);
            letter-spacing: 1px;
        }
        
        .exam-info {
            color: #90d6a3;
            font-size: 1.1rem;
            margin-top: 5px;
        }
        
        /* Sections */
        .section {
            display: none;
            padding: 25px;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .active {
            display: block;
        }
        
        /* Welcome message with Islamic theme */
        .welcome-message {
            background: linear-gradient(135deg, rgba(39, 174, 96, 0.1) 0%, rgba(26, 58, 36, 0.7) 100%);
            padding: 35px;
            border-radius: 12px;
            margin: 25px 0;
            text-align: center;
            font-size: 1.2rem;
            line-height: 1.8;
            color: #f5e9dd;
            border-left: 5px solid #27ae60;
            border-right: 1px solid rgba(39, 174, 96, 0.3);
            border-top: 1px solid rgba(39, 174, 96, 0.2);
            border-bottom: 1px solid rgba(39, 174, 96, 0.3);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .welcome-message::before {
            content: 'ðŸ•Œ';
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 3rem;
            opacity: 0.1;
        }
        
        /* Buttons with green theme */
        .btn {
            display: inline-block;
            background: linear-gradient(135deg, #27ae60 0%, #229954 100%);
            color: #ffffff;
            border: none;
            padding: 15px 32px;
            font-size: 1.1rem;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            margin: 12px 8px;
            font-weight: 700;
            letter-spacing: 0.5px;
            border: 2px solid rgba(46, 204, 113, 0.5);
            box-shadow: 0 6px 15px rgba(39, 174, 96, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .btn::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(to right, transparent, rgba(255, 255, 255, 0.2), transparent);
            transform: rotate(30deg);
            transition: all 0.5s;
        }
        
        .btn:hover {
            background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 10px 25px rgba(39, 174, 96, 0.5);
            color: #ffffff;
        }
        
        .btn:hover::after {
            left: 100%;
        }
        
        .btn:focus {
            outline: 2px solid #2ecc71;
            outline-offset: 3px;
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #5d7e6a 0%, #4a6e5a 100%);
            color: #f5e9dd;
            border-color: #7f8c8d;
        }
        
        .btn-secondary:hover {
            background: linear-gradient(135deg, #7f8c8d 0%, #5d7e6a 100%);
        }
        
        .btn-success {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            color: white;
            border-color: #229954;
        }
        
        .btn-success:hover {
            background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #c0392b 0%, #e74c3c 100%);
            color: white;
            border-color: #922b21;
        }
        
        .btn-danger:hover {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        }
        
        .btn-container {
            text-align: center;
            margin-top: 35px;
        }
        
        /* Form elements */
        .form-group {
            margin-bottom: 28px;
        }
        
        label {
            display: block;
            margin-bottom: 12px;
            font-weight: 600;
            color: #2ecc71;
            font-size: 1.15rem;
            letter-spacing: 0.5px;
        }
        
        input[type="text"] {
            width: 100%;
            padding: 16px;
            background: rgba(15, 42, 26, 0.7);
            border: 2px solid #5d7e6a;
            border-radius: 10px;
            font-size: 1.1rem;
            color: #f5e9dd;
            transition: all 0.3s;
            font-family: inherit;
        }
        
        input[type="text"]:focus {
            border-color: #27ae60;
            outline: none;
            box-shadow: 0 0 0 3px rgba(39, 174, 96, 0.3);
            background: rgba(15, 42, 26, 0.9);
        }
        
        .error-message {
            color: #ff6b6b;
            font-size: 0.95rem;
            margin-top: 8px;
            display: none;
            font-weight: 500;
        }
        
        /* Instructions with Islamic theme */
        .instructions {
            background: linear-gradient(135deg, rgba(93, 126, 106, 0.1) 0%, rgba(26, 58, 36, 0.7) 100%);
            padding: 30px;
            border-radius: 12px;
            margin: 25px 0;
            border-left: 5px solid #27ae60;
            border: 1px solid rgba(39, 174, 96, 0.2);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            position: relative;
        }
        
        .instructions::before {
            content: 'ðŸ“¿';
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 2.5rem;
            opacity: 0.1;
        }
        
        .instructions h3 {
            margin-bottom: 20px;
            color: #2ecc71;
            font-size: 1.5rem;
            position: relative;
            display: inline-block;
        }
        
        .instructions h3::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            width: 60px;
            height: 3px;
            background: #27ae60;
            border-radius: 2px;
        }
        
        .instructions ul {
            padding-left: 25px;
        }
        
        .instructions li {
            margin-bottom: 14px;
            line-height: 1.7;
            padding-left: 8px;
            position: relative;
        }
        
        .instructions li::before {
            content: 'â€¢';
            color: #27ae60;
            font-size: 1.5rem;
            position: absolute;
            left: -20px;
            top: -5px;
        }
        
        /* Exam interface */
        .exam-header {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(39, 174, 96, 0.3);
        }
        
        .student-info {
            font-size: 1.6rem;
            font-weight: bold;
            color: #2ecc71;
            margin-bottom: 25px;
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, rgba(39, 174, 96, 0.1) 0%, rgba(93, 126, 106, 0.2) 100%);
            border-radius: 12px;
            border: 1px solid rgba(39, 174, 96, 0.3);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .exam-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
            padding: 20px;
            background: rgba(15, 42, 26, 0.5);
            border-radius: 12px;
            border: 1px solid rgba(39, 174, 96, 0.2);
        }
        
        .question-counter {
            font-size: 1.2rem;
            color: #2ecc71;
            font-weight: 600;
            padding: 10px 20px;
            background: rgba(39, 174, 96, 0.1);
            border-radius: 8px;
            border: 1px solid rgba(39, 174, 96, 0.3);
        }
        
        .timer-container {
            background: linear-gradient(135deg, #27ae60 0%, #229954 100%);
            color: #ffffff;
            padding: 12px 20px;
            border-radius: 10px;
            font-weight: bold;
            font-size: 1.3rem;
            box-shadow: 0 4px 12px rgba(39, 174, 96, 0.4);
            display: none;
            border: 2px solid rgba(46, 204, 113, 0.5);
            font-family: 'Courier New', monospace;
        }
        
        .submit-container {
            display: none;
        }
        
        .exam-content {
            margin-bottom: 35px;
            background: rgba(15, 42, 26, 0.4);
            padding: 30px;
            border-radius: 12px;
            border: 1px solid rgba(39, 174, 96, 0.2);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }
        
        .question-text {
            font-size: 1.35rem;
            margin-bottom: 25px;
            font-weight: 600;
            color: #2ecc71;
            line-height: 1.6;
            padding: 20px;
            background: rgba(93, 126, 106, 0.1);
            border-radius: 10px;
            border-left: 4px solid #27ae60;
        }
        
        .options-container {
            margin-left: 15px;
        }
        
        .option {
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            padding: 18px 20px;
            border-radius: 10px;
            transition: all 0.3s;
            background: rgba(26, 58, 36, 0.5);
            border: 1px solid rgba(93, 126, 106, 0.3);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        
        .option::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(39, 174, 96, 0.1), transparent);
            transform: translateX(-100%);
            transition: transform 0.5s;
        }
        
        .option:hover {
            background: rgba(39, 174, 96, 0.1);
            border-color: #27ae60;
            transform: translateX(5px);
        }
        
        .option:hover::before {
            transform: translateX(100%);
        }
        
        .option input {
            margin-right: 15px;
            width: 22px;
            height: 22px;
            cursor: pointer;
            accent-color: #27ae60;
        }
        
        .option label {
            font-weight: normal;
            margin-bottom: 0;
            cursor: pointer;
            flex: 1;
            color: #f5e9dd;
            font-size: 1.1rem;
            line-height: 1.5;
        }
        
        /* Question navigation */
        .question-navigation {
            margin-top: 35px;
            padding-top: 25px;
            border-top: 2px solid rgba(39, 174, 96, 0.3);
        }
        
        .question-navigation h3 {
            margin-bottom: 20px;
            color: #2ecc71;
            text-align: center;
            font-size: 1.5rem;
            position: relative;
            display: inline-block;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .question-navigation h3::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 3px;
            background: #27ae60;
            border-radius: 2px;
        }
        
        .question-grid {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 12px;
            margin-bottom: 25px;
        }
        
        .question-number {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, rgba(93, 126, 106, 0.3) 0%, rgba(70, 103, 86, 0.5) 100%);
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            border: 1px solid rgba(39, 174, 96, 0.3);
            color: #f5e9dd;
            font-size: 1.1rem;
        }
        
        .question-number:hover {
            background: linear-gradient(135deg, rgba(39, 174, 96, 0.3) 0%, rgba(30, 160, 90, 0.5) 100%);
            transform: scale(1.1);
            border-color: #27ae60;
        }
        
        .question-number.current {
            background: linear-gradient(135deg, #27ae60 0%, #229954 100%);
            color: #ffffff;
            border-color: #2ecc71;
            box-shadow: 0 4px 10px rgba(39, 174, 96, 0.4);
            transform: scale(1.1);
        }
        
        .question-number.answered {
            background: linear-gradient(135deg, #27ae60 0%, #229954 100%);
            color: white;
            border-color: #2ecc71;
        }
        
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }
        
        /* Results section - NO SCORE DISPLAY */
        .results-container {
            text-align: center;
            padding: 40px;
            background: linear-gradient(135deg, rgba(15, 42, 26, 0.8) 0%, rgba(26, 58, 36, 0.9) 100%);
            border-radius: 16px;
            border: 2px solid #27ae60;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .results-container::before {
            content: 'âœ…';
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 4rem;
            opacity: 0.1;
        }
        
        .results-container h2 {
            color: #2ecc71;
            font-size: 2.2rem;
            margin-bottom: 25px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .student-info {
            font-size: 1.5rem;
            margin-bottom: 15px;
        }
        
        .subject {
            font-size: 1.3rem;
            color: #90d6a3;
            margin-bottom: 30px;
            font-weight: 600;
        }
        
        .feedback {
            font-size: 1.3rem;
            margin: 25px 0;
            color: #f5e9dd;
            line-height: 1.7;
            padding: 25px;
            background: rgba(39, 174, 96, 0.1);
            border-radius: 12px;
            border: 1px solid rgba(39, 174, 96, 0.3);
        }
        
        .submission-status {
            margin-top: 25px;
            padding: 20px;
            background: linear-gradient(135deg, rgba(39, 174, 96, 0.2) 0%, rgba(46, 204, 113, 0.3) 100%);
            border-radius: 12px;
            color: #2ecc71;
            font-size: 1.2rem;
            border: 1px solid rgba(46, 204, 113, 0.5);
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .question-grid {
                grid-template-columns: repeat(5, 1fr);
            }
            
            .exam-controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 15px;
            }
            
            .btn {
                width: 100%;
                margin: 8px 0;
            }
            
            .subject-title {
                font-size: 1.8rem;
            }
            
            .question-text {
                font-size: 1.2rem;
            }
            
            .container {
                padding: 15px;
                margin: 15px;
            }
            
            .welcome-message, .instructions, .exam-content {
                padding: 20px;
            }
        }
        
        @media (max-width: 480px) {
            .question-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 10px;
            }
            
            .question-number {
                width: 35px;
                height: 35px;
                font-size: 1rem;
            }
            
            .subject-title {
                font-size: 1.5rem;
            }
            
            .results-container {
                padding: 25px 15px;
            }
        }
        
        /* Back to Home button */
        .back-home {
            margin-top: 20px;
            text-align: center;
        }
        
        /* Loading animation */
        .loading {
            display: none;
            text-align: center;
            margin: 30px 0;
        }
        
        .spinner {
            border: 4px solid rgba(39, 174, 96, 0.3);
            border-top: 4px solid #27ae60;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header with logo -->
        <div class="header">
            <img src="https://raw.githubusercontent.com/ideolixlearninghub/Trustworthy_schoolsexam/main/The%20trustworthy%20school%20logo.jpg" 
                 alt="The Trustworthy College logo" class="logo">
            <h1 class="subject-title">SS1 ISLAMIC STUDIES EXAMINATION</h1>
            <div class="exam-info">2nd Term Mid-Term Test | 40 Questions | 45 Minutes</div>
        </div>
        
        <!-- Welcome Section -->
        <section id="welcome-section" class="section active">
            <div class="welcome-message">
                "Welcome to The Trustworthy College Islamic Studies Examination. Demonstrate your understanding of Islamic principles, Hadith, Hajj, and purification. Success comes from knowledge and sincere application of Islamic teachings. Best of luck."
            </div>
            <div class="btn-container">
                <button id="start-exam-btn" class="btn">Start Examination</button>
            </div>
        </section>
        
        <!-- Student Information Section -->
        <section id="student-info-section" class="section">
            <h2>Student Information</h2>
            <p>Please provide your details to continue with the examination.</p>
            
            <form id="student-info-form">
                <div class="form-group">
                    <label for="first-name">First Name *</label>
                    <input type="text" id="first-name" required>
                    <div class="error-message" id="first-name-error">First name is required</div>
                </div>
                
                <div class="form-group">
                    <label for="middle-name">Middle Name *</label>
                    <input type="text" id="middle-name" required>
                    <div class="error-message" id="middle-name-error">Middle name is required</div>
                </div>
                
                <div class="form-group">
                    <label for="last-name">Last Name *</label>
                    <input type="text" id="last-name" required>
                    <div class="error-message" id="last-name-error">Last name is required</div>
                </div>
                
                <div class="btn-container">
                    <button type="button" id="back-to-welcome" class="btn btn-secondary">Back</button>
                    <button type="button" id="continue-to-instructions" class="btn">Continue</button>
                </div>
            </form>
        </section>
        
        <!-- Instructions Section -->
        <section id="instructions-section" class="section">
            <h2>Examination Instructions</h2>
            
            <div class="instructions">
                <h3>Important Notes:</h3>
                <ul>
                    <li>This examination consists of 40 multiple-choice questions covering Islamic Studies.</li>
                    <li>You have 45 minutes to complete this examination.</li>
                    <li>Answer all questions to the best of your ability.</li>
                    <li>Navigate between questions using the Previous and Next buttons or the question grid.</li>
                    <li>Answered questions will be marked with green in the question grid.</li>
                    <li>Once you submit your answers, you cannot change them.</li>
                    <li>Ensure you have a stable internet connection throughout the examination.</li>
                    <li>Read each question carefully before selecting your answer.</li>
                    <li>Your results will be submitted automatically upon completion.</li>
                    <li>Demonstrate your understanding of Islamic jurisprudence, Hadith classification, Hajj rites, and purification methods.</li>
                </ul>
            </div>
            
            <div class="btn-container">
                <button type="button" id="back-to-student-info" class="btn btn-secondary">Back</button>
                <button type="button" id="begin-test" class="btn">Begin Test</button>
            </div>
        </section>
        
        <!-- Exam Interface Section -->
        <section id="exam-section" class="section">
            <div class="exam-header">
                <div class="student-info" id="display-student-name"></div>
                <div class="exam-controls">
                    <div class="question-counter" id="question-counter">Question 1 of 40</div>
                    <div class="timer-container" id="timer-container">
                        Time Left: <span id="timer">45:00</span>
                    </div>
                    <div class="submit-container" id="submit-container">
                        <button type="button" id="submit-exam" class="btn btn-success">Submit Exam</button>
                    </div>
                </div>
            </div>
            
            <div class="exam-content">
                <div class="question-text" id="question-text"></div>
                
                <div class="options-container" id="options-container">
                    <!-- Options will be populated by JavaScript -->
                </div>
            </div>
            
            <!-- Question navigation grid after question content -->
            <div class="question-navigation">
                <h3>Question Navigation</h3>
                <div class="question-grid" id="question-grid">
                    <!-- Question numbers will be populated by JavaScript -->
                </div>
                
                <div class="navigation-buttons">
                    <button type="button" id="prev-question" class="btn btn-secondary">Previous</button>
                    <button type="button" id="next-question" class="btn">Next</button>
                </div>
            </div>
            
            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p>Submitting your results...</p>
            </div>
        </section>
        
        <!-- Results Section - NO SCORE DISPLAY -->
        <section id="results-section" class="section">
            <div class="results-container">
                <h2>Examination Completed</h2>
                <div class="student-info" id="results-student-name"></div>
                <div class="subject" id="results-subject">SS1 Islamic Studies - 2nd Term Mid-Term Test</div>
                
                <div class="feedback" id="feedback-message">
                    Thank you for completing the Islamic Studies examination. Your results have been submitted successfully to the examination board.
                </div>
                
                <div class="submission-status" id="submission-status">
                    Your examination has been successfully submitted. Results will be communicated through appropriate channels.
                </div>
                
                <div class="btn-container">
                    <button type="button" id="restart-exam" class="btn">Take Another Exam</button>
                    <div class="back-home">
                        <a href="../index.html" class="btn btn-secondary">Back to Home</a>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <script>
        // SUBJECT: SS1 ISLAMIC STUDIES - 2nd Term Mid-Term Test
        const originalQuestions = [
            {
                question: "In an Islamic state, all disputes must be settled through the use of the injunctions from:",
                options: ["The court", "Qur'an and Hadith", "The Fiqh"],
                answer: "B"
            },
            {
                question: "The greatest form of insurance which Islam has legislated is:",
                options: ["Charity", "Prayer", "Fasting"],
                answer: "A"
            },
            {
                question: "Hajj is not obligatory for:",
                options: ["Sanity", "Muslim", "Slave"],
                answer: "C"
            },
            {
                question: "Aql means:",
                options: ["Sanity", "Health", "Moral"],
                answer: "A"
            },
            {
                question: "Istijmar means:",
                options: ["Purification with clothes", "Purification with water", "Purification with stone"],
                answer: "C"
            },
            {
                question: "Bulugh refers to:",
                options: ["Islam", "Maturity", "Ability"],
                answer: "B"
            },
            {
                question: "Pilgrimage is a duty that mankind owes to Allah, found in the Qur'an:",
                options: ["3:97", "4:97", "5:97"],
                answer: "A"
            },
            {
                question: "All these are the moral objectives of Hajj except:",
                options: ["Tolerance", "Humility", "Arrogance"],
                answer: "C"
            },
            {
                question: "The following are the classifications of Hadith except:",
                options: ["Mawdu'", "Sahih", "Da'if"],
                answer: "A"
            },
            {
                question: "Tayammum is performed by a Muslim when:",
                options: ["Time of prayer has elapsed", "Access to water is very difficult", "He is in a hurry"],
                answer: "B"
            },
            {
                question: "Any Hadith whose message is directly from Allah is:",
                options: ["Sahih", "Qudsi", "Gharib"],
                answer: "B"
            },
            {
                question: "A Hadith is referred to as Da'if because:",
                options: ["It is a fabricated tradition", "It is supported with evidence", "It has defects in its Isnad and Matn"],
                answer: "C"
            },
            {
                question: "The 8th of Dhul-Hijjah is known as Tarwiyyah because it is:",
                options: ["The beginning of Hajj", "Sacrifice day", "The first day of Tarwiyyah"],
                answer: "A"
            },
            {
                question: "The following are authors of Sihah Sitta except:",
                options: ["Ibn Majah", "Ibn Malik", "Tirmidhi"],
                answer: "B"
            },
            {
                question: "Excellent or sound Hadith are grouped under:",
                options: ["Sahih", "Da'if", "Musnad"],
                answer: "A"
            },
            {
                question: "Who among the following is not a narrator of Hadith?",
                options: ["Abu Sa'ad Malik", "Khadijah", "Abu Hurayrah"],
                answer: "B"
            },
            {
                question: "Apart from cleanliness of the body and clothes, the devotee who intends to pray must also ensure the cleanliness of:",
                options: ["Place", "Soul", "Qiblah"],
                answer: "A"
            },
            {
                question: "Hajj combined with 'Umrah is known as:",
                options: ["Ifrad", "Tamattu'", "Qiran"],
                answer: "C"
            },
            {
                question: "Pilgrims combine Salatul ______ and ______ in Muzdalifah:",
                options: ["Asr and Maghrib", "Isha and Subh", "Maghrib and Isha"],
                answer: "A"
            },
            {
                question: "Taharah simply means:",
                options: ["Intention", "Prayer", "Purification"],
                answer: "C"
            },
            {
                question: "Matn is the ___ of the Hadith",
                options: ["Compiler", "Reporter", "Teaching"],
                answer: "B"
            },
            {
                question: "Khulafa'u Rashidun are ___ in number",
                options: ["Four", "Three", "Five"],
                answer: "A"
            },
            {
                question: "Jinn were created out of ___",
                options: ["Clay", "Dust", "Fire"],
                answer: "C"
            },
            {
                question: "The following vitiates ablution except ___",
                options: ["Eating", "Deep sleep", "Passing wind"],
                answer: "A"
            },
            {
                question: "Angels were created from ___",
                options: ["Dust", "Light", "Water"],
                answer: "B"
            },
            {
                question: "The following are obligatory acts of Hajj except ___",
                options: ["Tawaf", "Arafah", "Talbiyyah"],
                answer: "C"
            },
            {
                question: "The following are the sources of pure water except ___",
                options: ["Sewage", "Stream", "River"],
                answer: "A"
            },
            {
                question: "The pilgrims go to Arafah on the ___ day of Dhul-Hijjah",
                options: ["Ninth", "Eighth", "Tenth"],
                answer: "A"
            },
            {
                question: "Salatul-Tarawih is observed in the month of ___",
                options: ["Rajab", "Ramadan", "Shawwal"],
                answer: "B"
            },
            {
                question: "Sand ablution is known as ___",
                options: ["Taharah", "Tashahud", "Wudu"],
                answer: "C"
            },
            {
                question: "The following are acts of Umrah except ___",
                options: ["Talbiyyah", "Ziyarah", "Wuquful Arafah"],
                answer: "B"
            },
            {
                question: "Which of the following prayers has silent recitation?",
                options: ["Subh", "Zuhr", "Jumu'ah"],
                answer: "B"
            },
            {
                question: "___ is the total submission to the will and commandment of Allah",
                options: ["Islam", "Qiyas", "Mandub"],
                answer: "A"
            },
            {
                question: "Which of these Hadith narrates the dialogue with Prophet and Angel?",
                options: ["Hadith 1", "Hadith 2", "Hadith 3"],
                answer: "B"
            },
            {
                question: "Tawhid refers to ___",
                options: ["Attribute of Allah", "Oneness of Allah", "The principle of Allah"],
                answer: "B"
            },
            {
                question: "___ and ___ are the two principal sources of the religion of Islam",
                options: ["Qiyas and Matn", "Qur'an and Sunnah", "Hadith and Ijtihad"],
                answer: "B"
            },
            {
                question: "Ulul-Azim are ___ in number",
                options: ["Six", "Four", "Five"],
                answer: "C"
            },
            {
                question: "Al-Qur'an contains ___ chapters",
                options: ["119", "114", "121"],
                answer: "B"
            },
            {
                question: "The first revelation of Qur'an talks about ___",
                options: ["Education", "Knowledge", "Divorce"],
                answer: "A"
            },
            {
                question: "The first convert to Islam after the first revelation is ___",
                options: ["Khadijah", "Ali", "Umar"],
                answer: "A"
            }
        ];

        // Application state
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let studentName = "";
        let timerInterval;
        let timeLeft = 45 * 60; // 45 minutes in seconds
        let questions = [];

        // Background images for rotation (Islamic theme)
        const backgroundImages = [
            'https://images.unsplash.com/photo-1512389142860-9c449e58a543?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2069&q=80',
            'https://images.unsplash.com/photo-1562774053-701939374585?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2064&q=80',
            'https://images.unsplash.com/photo-1542884748-2b1c3b57d1a4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80'
        ];

        // DOM elements
        const sections = {
            welcome: document.getElementById('welcome-section'),
            studentInfo: document.getElementById('student-info-section'),
            instructions: document.getElementById('instructions-section'),
            exam: document.getElementById('exam-section'),
            results: document.getElementById('results-section')
        };

        // Initialize background rotation
        let currentBgIndex = 0;
        function rotateBackground() {
            currentBgIndex = (currentBgIndex + 1) % backgroundImages.length;
            document.body.style.backgroundImage = `url('${backgroundImages[currentBgIndex]}')`;
        }
        
        // Rotate background every 10 seconds
        setInterval(rotateBackground, 10000);

        // Shuffle questions array
        function shuffleQuestions() {
            // Create a copy of the original questions
            questions = [...originalQuestions];
            
            // Shuffle the questions using Fisher-Yates algorithm
            for (let i = questions.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [questions[i], questions[j]] = [questions[j], questions[i]];
            }
            
            // Initialize userAnswers array with null values
            userAnswers = Array(questions.length).fill(null);
        }

        // Timer function
        function startTimer() {
            clearInterval(timerInterval);
            timeLeft = 45 * 60; // Reset to 45 minutes
            
            // Show timer container and submit button
            document.getElementById('timer-container').style.display = 'block';
            document.getElementById('submit-container').style.display = 'block';
            
            timerInterval = setInterval(() => {
                timeLeft--;
                
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                
                document.getElementById('timer').textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    alert("Time's up! Your exam will be submitted automatically.");
                    calculateScore();
                }
                
                // Warning colors
                if (timeLeft <= 600) { // 10 minutes left
                    document.getElementById('timer-container').style.background = 'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)';
                } else if (timeLeft <= 1350) { // 22.5 minutes left
                    document.getElementById('timer-container').style.background = 'linear-gradient(135deg, #f39c12 0%, #e67e22 100%)';
                }
            }, 1000);
        }

        // Navigation functions
        function showSection(sectionName) {
            // Hide all sections
            Object.values(sections).forEach(section => {
                section.classList.remove('active');
            });
            
            // Show the requested section
            sections[sectionName].classList.add('active');
            
            // Hide timer and submit button if not in exam section
            if (sectionName !== 'exam') {
                document.getElementById('timer-container').style.display = 'none';
                document.getElementById('submit-container').style.display = 'none';
            }
            
            // Scroll to top
            window.scrollTo(0, 0);
        }

        // Initialize event listeners
        document.getElementById('start-exam-btn').addEventListener('click', () => {
            showSection('studentInfo');
        });

        document.getElementById('back-to-welcome').addEventListener('click', () => {
            showSection('welcome');
        });

        document.getElementById('continue-to-instructions').addEventListener('click', () => {
            // Validate form
            const firstName = document.getElementById('first-name').value.trim();
            const middleName = document.getElementById('middle-name').value.trim();
            const lastName = document.getElementById('last-name').value.trim();
            
            let isValid = true;
            
            if (!firstName) {
                document.getElementById('first-name-error').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('first-name-error').style.display = 'none';
            }
            
            if (!middleName) {
                document.getElementById('middle-name-error').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('middle-name-error').style.display = 'none';
            }
            
            if (!lastName) {
                document.getElementById('last-name-error').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('last-name-error').style.display = 'none';
            }
            
            if (isValid) {
                studentName = `${firstName} ${middleName} ${lastName}`;
                showSection('instructions');
            }
        });

        document.getElementById('back-to-student-info').addEventListener('click', () => {
            showSection('studentInfo');
        });

        document.getElementById('begin-test').addEventListener('click', () => {
            // Initialize exam with shuffled questions
            shuffleQuestions();
            currentQuestionIndex = 0;
            
            // Display student name
            document.getElementById('display-student-name').textContent = studentName;
            document.getElementById('results-student-name').textContent = studentName;
            
            // Create question navigation grid
            createQuestionGrid();
            
            // Load first question
            loadQuestion(currentQuestionIndex);
            
            // Start timer
            startTimer();
            
            showSection('exam');
        });

        document.getElementById('prev-question').addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion(currentQuestionIndex);
            }
        });

        document.getElementById('next-question').addEventListener('click', () => {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                loadQuestion(currentQuestionIndex);
            }
        });

        document.getElementById('submit-exam').addEventListener('click', () => {
            const confirmed = confirm("Are you sure you want to submit? You will not be able to change your answers after this.");
            
            if (confirmed) {
                clearInterval(timerInterval);
                showLoading();
                setTimeout(() => {
                    calculateScore();
                }, 1500);
            }
        });

        document.getElementById('restart-exam').addEventListener('click', () => {
            clearInterval(timerInterval);
            // Reset form
            document.getElementById('first-name').value = '';
            document.getElementById('middle-name').value = '';
            document.getElementById('last-name').value = '';
            showSection('welcome');
        });

        function showLoading() {
            document.getElementById('loading').style.display = 'block';
        }

        function hideLoading() {
            document.getElementById('loading').style.display = 'none';
        }

        // Create question navigation grid
        function createQuestionGrid() {
            const questionGrid = document.getElementById('question-grid');
            questionGrid.innerHTML = '';
            
            for (let i = 0; i < questions.length; i++) {
                const questionNumber = document.createElement('div');
                questionNumber.className = 'question-number';
                questionNumber.textContent = i + 1;
                questionNumber.dataset.index = i;
                
                // Mark if answered
                if (userAnswers[i] !== null) {
                    questionNumber.classList.add('answered');
                }
                
                // Mark current question
                if (i === currentQuestionIndex) {
                    questionNumber.classList.add('current');
                }
                
                questionNumber.addEventListener('click', () => {
                    currentQuestionIndex = parseInt(questionNumber.dataset.index);
                    loadQuestion(currentQuestionIndex);
                });
                
                questionGrid.appendChild(questionNumber);
            }
        }

        // Update question navigation grid
        function updateQuestionGrid() {
            const questionNumbers = document.querySelectorAll('.question-number');
            
            questionNumbers.forEach((number, index) => {
                number.classList.remove('current');
                number.classList.remove('answered');
                
                if (index === currentQuestionIndex) {
                    number.classList.add('current');
                }
                
                if (userAnswers[index] !== null) {
                    number.classList.add('answered');
                }
            });
        }

        // Exam functionality
        function loadQuestion(index) {
            const question = questions[index];
            
            // Update question counter
            document.getElementById('question-counter').textContent = `Question ${index + 1} of ${questions.length}`;
            
            // Set question text
            document.getElementById('question-text').textContent = question.question;
            
            // Clear options container
            const optionsContainer = document.getElementById('options-container');
            optionsContainer.innerHTML = '';
            
            // Create option elements
            question.options.forEach((option, optionIndex) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option';
                
                const optionId = `option-${index}-${optionIndex}`;
                
                const radio = document.createElement('input');
                radio.type = 'radio';
                radio.name = `question-${index}`;
                radio.id = optionId;
                radio.value = String.fromCharCode(65 + optionIndex); // A, B, C
                
                // Check if this option was previously selected
                if (userAnswers[index] === radio.value) {
                    radio.checked = true;
                }
                
                radio.addEventListener('change', () => {
                    userAnswers[index] = radio.value;
                    updateQuestionGrid();
                });
                
                const label = document.createElement('label');
                label.htmlFor = optionId;
                label.textContent = `${String.fromCharCode(65 + optionIndex)}. ${option}`;
                
                optionDiv.appendChild(radio);
                optionDiv.appendChild(label);
                
                optionsContainer.appendChild(optionDiv);
            });
            
            // Update navigation buttons
            document.getElementById('prev-question').disabled = index === 0;
            document.getElementById('next-question').disabled = index === questions.length - 1;
            
            // Update question grid
            updateQuestionGrid();
        }

        function calculateScore() {
            hideLoading();
            let score = 0;
            
            for (let i = 0; i < questions.length; i++) {
                if (userAnswers[i] === questions[i].answer) {
                    score++;
                }
            }
            
            // Submit to Google Form WITHOUT showing score to student
            submitToGoogleForm(studentName, "SS1 Islamic Studies - 2nd Term Mid-Term Test", `${score}/${questions.length}`);
            
            // Show submission status
            document.getElementById('submission-status').style.display = 'block';
            
            showSection('results');
        }

        // Google Form submission function
        function submitToGoogleForm(fullName, subject, score) {
            const formURL = "https://docs.google.com/forms/d/e/1FAIpQLSc-ceYVrOpCcsDj21HIqO3uq69Xrm0ue6CzNL-1x5zFIslfWw/formResponse";
            const formData = new FormData();
            formData.append("entry.862885683", fullName);
            formData.append("entry.1545021484", "SS1");
            formData.append("entry.1558221900", subject);
            formData.append("entry.2022160530", score);

            // Use no-cors so browser will not block cross-origin form POST
            fetch(formURL, {
                method: "POST",
                mode: "no-cors",
                body: formData
            }).then(() => {
                console.log("Results submitted successfully");
            }).catch(err => {
                console.warn("Form submission (no-cors) likely blocked for debug; data still sent.");
            });
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', () => {
            // Focus on first input
            document.getElementById('first-name').focus();
        });
    </script>
</body>
</html>
